<div class="container-fluid">
    <table class="table table-bordered table-hover table-sm">
        <thead class="thead-light">
        <tr>
            <th scope="col" class="text-center">Corpus</th>
            <th scope="col" class="text-center">Topic</th>
            <th scope="col" class="text-center">Query Group</th>
            <th scope="col" class="text-center">Query</th>
            <th scope="col"  class="text-center" colspan="{{vm.getMetricsCount()}}">Metrics</th>
        </tr>
        <tr>
            <th scope="col">&nbsp;</th>
            <th scope="col">&nbsp;</th>
            <th scope="col">&nbsp;</th>
            <th scope="col">&nbsp;</th>
            <th scope="col" ng-repeat="mtr in vm.data.metrics">{{mtr.name}}</th>
        </tr>
        </thead>
        <tbody ng-repeat="corp in vm.data.corpora track by $index">
            <tr class="table-primary">
                <th scope="row">{{corp.name}}</th>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td ng-repeat="mtr in corp.metrics">
                    <table class="table table-bordered table-hover table-sm">
                        <thead class="thead-dark">
                            <tr>
                                <th ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                    {{ver}}
                                </th>
                                <th colspan="{{mtr.trend.length}}">
                                    &Delta;
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                    {{obj.value}}
                                </td>
                                <td ng-repeat="t in mtr.trend" class="{{t > 0 ? 'bg-success' : (t < 0 ? 'bg-danger' : 'bg-warning')}}">
                                    <!-- How to present more than a trend value? -->
                                    {{t | number:4}}
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr ng-repeat-start="topic in corp.topics" class="table-secondary">
                <td>&nbsp;</td>
                <td scope="row">{{topic.name}}</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td ng-repeat="mtr in topic.metrics">
                    <table class="table table-bordered table-hover table-sm">
                        <thead class="thead-dark">
                        <tr>
                            <th ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                {{ver}}
                            </th>
                            <th colspan="{{mtr.trend.length}}">
                                &Delta;
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                {{obj.value}}
                            </td>
                            <td ng-repeat="t in mtr.trend" class="{{t > 0 ? 'bg-success' : (t < 0 ? 'bg-danger' : 'bg-warning')}}">
                                <!-- How to present more than a trend value? -->
                                {{t | number:4}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr ng-repeat-start="qg in topic['query-groups']">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td scope="row">{{qg.name}}</td>
                <td>&nbsp;</td>
                <td ng-repeat="mtr in qg.metrics">
                    <table class="table table-bordered table-hover table-sm">
                        <thead class="thead-dark">
                        <tr>
                            <th ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                {{ver}}
                            </th>
                            <th colspan="{{mtr.trend.length}}">
                                &Delta;
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                {{obj.value}}
                            </td>
                            <td ng-repeat="t in mtr.trend" class="{{t > 0 ? 'bg-success' : (t < 0 ? 'bg-danger' : 'bg-warning')}}">
                                <!-- How to present more than a trend value? -->
                                {{t | number:4}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr ng-repeat="qe in qg['query-evaluations']">
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td scope="row" class="code"><pre><code>{{qe.query}}</code></pre></td>
                <td ng-repeat="mtr in qe.metrics">
                    <table class="table table-bordered table-hover table-sm">
                        <thead class="thead-dark">
                        <tr>
                            <th ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                {{ver}}
                            </th>
                            <th colspan="{{mtr.trend.length}}">
                                &Delta;
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td ng-repeat="(ver, obj) in mtr.versions" class="col-sm">
                                {{obj.value}}
                            </td>
                            <td ng-repeat="t in mtr.trend" class="{{t > 0 ? 'bg-success' : (t < 0 ? 'bg-danger' : 'bg-warning')}}">
                                <!-- How to present more than a trend value? -->
                                {{t | number:4}}
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </td>
            </tr>
            <tr ng-repeat-end ng-hide="true">
                <td></td>
            </tr>
            <tr ng-repeat-end ng-hide="true">
                <td></td>
            </tr>
        </tbody>
    </table>
</div>
